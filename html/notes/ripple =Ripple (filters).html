

<a name=/{notes}/filters/ripple toc="Ripple (filters)">
<h2 byondver=513>Ripple filter</h2>

<dl><dt><b>See also:</b>
<dd><a href=#/{notes}/filters/wave>Wave (filters)</a>
</dl>

<dl><dt>Format:</dt>
<dd>filter(type="ripple", ...)</dd>
</dl>

<dl><dt>Args:</dt>
<dd>x: Horiztonal position of ripple center, relative to image center (defaults to 0)</dd>
<dd>y: Vertical position of ripple center, relative to image center (defaults to 0)</dd>
<dd>size: Maximum distortion in pixels (defaults to 1)</dd>
<dd>repeat: Wave period, in pixels (defaults to 2)</dd>
<dd>radius: Outer radius of ripple, in pixels (defaults to 0)</dd>
<dd>falloff: How quickly ripples lose strength away from the outer edge (defaults to 1)</dd>
<dd>flags: Defaults to 0; use <tt>WAVE_BOUNDED</tt> to keep distortion within the image</dd>
</dl>

<p>Applies a ripple distortion effect to this image.

<p>This filter is meant to be animated. A good animation will typically start
at a <tt>radius</tt> of 0 and animate to a larger value, with <tt>size</tt>
decreasing to 0.

<p>The <tt>falloff</tt> parameter can be tweaked to your liking. A value of 1
should look reasonably like ripples in water, with the inner ripples losing
strength. A value of 0 will cause no reduction in strength.

<p>The equation governing the ripple distortion is size &times; sin(2&pi;r') &divide; (2.5 &times; falloff &times; r'<sup>2</sup> + 1),
where r' = (radius - distance) &divide; repeat.

<p>Up to 10 ripples can be stacked together in a single pass of the filter, as
long as they have the same <tt>repeat</tt>, <tt>falloff</tt>, and
<tt>flags</tt> values. (See the wave filter for the <tt>WAVE_BOUNDED</tt> flag.)

