

<a name=/atom/proc/Entered>
<h2>Entered proc (atom)</h2>

<dl><dt><b>See also:</b>
<dd><a href=#/atom/proc/Enter>Enter proc (atom)</a>
<dd><a href=#/atom/proc/Exit>Exit proc (atom)</a>
<dd><a href=#/atom/proc/Exited>Exited proc (atom)</a>
<dd><a href=#/atom/proc/Cross>Cross proc (atom)</a>
<dd><a href=#/atom/proc/Crossed>Crossed proc (atom)</a>
<dd><a href=#/atom/proc/Uncross>Uncross proc (atom)</a>
<dd><a href=#/atom/proc/Uncrossed>Uncrossed proc (atom)</a>
<dd><a href=#/atom/movable/proc/Move>Move proc (movable atom)</a>
<dd><a href=#/atom/movable/var/step_x>step_x var (movable atom)</a>
<dd><a href=#/atom/movable/var/step_y>step_y var (movable atom)</a>
</dl>

<dl><dt><b>Format:</b>
<dd>Entered(atom/movable/Obj,atom/OldLoc)
</dl>

<dl><dt><b>When:</b>
<dd>Called when an object has entered the contents list through Move().
Directly setting the object's loc or step_x/y vars does not result in a
call to Entered() or any other movement side-effects.  The same goes for
creation or deletion of an object at a location.
</dl>

<dl><dt><b>Args:</b>
<dd>Obj: the object that entered (a mob or obj).
<dd>OldLoc: the previous location of the object.
</dl>

<dl><dt><b>Default action:</b>
<dd>None for most atoms, but turfs will call Crossed().
</dl>

<h3>Example:</h3>
<xmp>
turf/pit
   Entered(O)
      O << "OUCH.  You fell in a pit!"
</xmp>

<p>The mob's Entered() and Exited() procs can be used to control what
happens when objects are added or removed from the mob's inventory.  Of
course that could all be done within get() and drop() verbs, but the
following code separates user interface from lower-level functions.

<h3>Example:</h3>
<xmp>
obj
   var
      weight = 10
   verb
      get()
         set src in oview(1)
         if(Move(usr))
            usr << "You pick up \a [src]."
         else
            usr << "You cannot pick up [src]."
      drop()
         set src in usr
         if(Move(usr.loc))
            usr << "You drop \a [src]."
mob
   var
      weight
      max_weight = 50

   Entered(obj/O)
      weight += O.weight
   Exited(obj/O)
      weight -= O.weight
   Enter(obj/O)
      //only allow entrance if weight is within the limit
      if(O.weight + weight <= max_weight)
         return ..()
</xmp>

<p>To see the advantages of this arrangement, imagine that there are certain
situations in which an object may be created directly within the mob's
inventory without the mob picking it up.  You can still run it through your
normal movement rules without calling get().

<h3>Example:</h3>
<xmp>
mob/verb/wish()
   var/obj/O = new() //create it with loc=null
   if(O.Move(usr))   //and then move it into inventory
      usr << "Your wish has been granted!"
   else
      usr << "You are too greedy!"
      del O
</xmp>

