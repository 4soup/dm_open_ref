

<a name=/atom/movable/var/screen_loc>
<h2>screen_loc var (movable atoms)</h2>

<dl><dt><b>See also:</b>
<dd><a href=#/{notes}/HUD>HUD / screen objects</a>
<dd><a href=#/atom/var/layer>layer var (atom)</a>
<dd><a href=#/client/var/screen>screen var (client)</a>
<dd><a href=#/client/var/view>view var (client)</a>
<dd><a href=#/world/var/map_format>map_format var (world)</a>
</dl>

<p>This is a text string that controls where an object that is listed in
<var>client.screen</var> will appear on the user's screen.  The format is:

<xmp>
"x,y"
"x:px,y:py"
"x1,y1 to x2,y2"
</xmp>

<p>The bottom left corner of the map viewport (southwest) is <tt>"1,1"</tt>.
If the view is 11x11, then the top-right corner (northeast) is
<tt>"11,11"</tt>. (Changing <a href=#/world/var/map_format>world.map_format</a>
may change the range for screen_loc.)

<p>A range of coordinates (the second format above) causes a square region to
be filled with the object at each position.  The southwest and northeast
corners of the box are indicated in the screen_loc value.

<h3>Special keywords</h3>

<p>The edges of the map may also be referenced by using directions, such as
<code>"3,NORTH"</code>.  For convenience, the order of coordinates is arbitrary
when using directions, so one may specify <var>y</var> before <var>x</var> as
in <code>"NORTH,WEST"</code>.  In expressions such as the latter, you may also
leave out the comma.  Icon size is not taken into account, so a big icon with
a screen_loc of <code>"SOUTHEAST"</code> will extend further to the right and
may create a border (see "Outside the map" below).

<p byondver=471>The <tt>CENTER</tt> keyword can also be used. This can be used alone to
completely center the object, or as either the x or y component. If the map
covers an even number of tiles in either direction, pixel offsets will be
applied automatically.  Centering is relative to the regular map edges, and it
does not take the icon's size into account.

<p byondver=512>The <tt>LEFT</tt>, <tt>RIGHT</tt>, <tt>TOP</tt>, and <tt>BOTTOM</tt>
keywords (also <tt>TOPLEFT</tt>, <tt>TOPRIGHT</tt>, <tt>BOTTOMLEFT</tt>,
<tt>BOTTOMRIGHT</tt>) can be used to anchor a screen object to the edge of
the map control if the map is zoomed in so that some pixels are cut off. When
you use these edge-alignment keywords, the icon size <i>is</i> taken into
account, and the alignment of the icon  changes to fit whichever edge you use.
Because these keywords do not conform to the normal tile-based structure of
the HUD, they can't be used for a range of tiles with the <code>"to"</code>
format.

<p>Note: <a href=#/{skin}/param/letterbox>Letterboxing</a>, the blank space to
either side of the map if it doesn't take up the whole map control, is not
considered usable space. HUD objects aligned to the control edge appear inside
any letterboxing, not on top of it.

<h3>Outside the map</h3>

<p>In addition to objects inside of the map view, one may create border
objects.  Borders are automatically created when screen objects are placed at
coordinates outside of the inner map view.  For example, objects placed at y=0
fall on a border directly below the map and y=-1 is one tile below that.  (The
<tt>CENTER</tt> keyword is based on normal viewport bounds and not any extra
borders.)

<p>A big icon placed towards the northeast end of the map, if it spills over
the edge, will create a border big enough for the whole icon to be shown. You
can avoid this by using the
<a href=#/atom/var/appearance_flags><tt>TILE_BOUND</tt> appearance flag</a>.
Transforms on this atom are not taken into account when determining whether to
add a border.

<h3>Offsets</h3>

<p>Offsets may be applied to screen_loc coordinates.  For example,
<code>"NORTH+1,WEST"</code> is in a border above the map.
<code>"CENTER+2,CENTER-1"</code> will appear 2 units right, 1 unit down from
the center of the map.

<p byondver=512>Non-integer offsets like 1.5 are allowed; the fractional part
will be counted towards a pixel offset.

<p byondver=512>Offsets may be specified in percentages as well. These effectively always
count as pixel offsets and will never be used to determine if a border should
be added. <code>"WEST+100%"</code> and <code>"100%"</code> are basically
identical to <code>"EAST"</code> in most respects, and <code>"WEST+50%"</code>
is basically the same as <code>"CENTER"</code>. If you're using the edge
keywords (<tt>LEFT</tt>, <tt>TOP</tt>, etc.), this percentage is relative to
the control edge and also factors in the icon size, so <code>"LEFT+100%"</code>
is equivalent to <code>"RIGHT"</code>.

<p>It is also possible to specify a pixel offset.  Screen objects do not use
<tt>pixel_x</tt> and <tt>pixel_y</tt> for this purpose, because it is intended
that an object could exist on the map and in the screen object list
simultaneously, so positioning must be independent. Pixel offsets are
specified after a colon like this: <tt>"1:16,1:16"</tt>. In this case the
object is shifted to the northeast by 16 pixels.

<h3>Layering</h3>

<p>Screen objects on a plane will appear above non-screen objects on the same
plane regardless of layer, except that <tt>BACKGROUND_LAYER</tt> or
<tt>EFFECTS_LAYER</tt> may be used to move the objects forward or back.

<h3>Secondary map controls</h3>

<p>You can use HUD objects in any additional <a href=#/{skin}/control/map>map
controls</a> that might appear in game's skin file. If you have a second map
named <tt>map2</tt> for instance, then you can use <tt>"map2:1,1"</tt> or
something similar as a <tt>screen_loc</tt>. If the map control is set to
automatically scale to fit its contents, it will try to show every object you
put there.

<p>Note: For secondary-map HUD items, you should not use the full
<tt>window.control</tt> ID, just the <a class=code href=#/{skin}/param/id>id</a>
of the control itself. Map controls should always have a unique <tt>id</tt>.

