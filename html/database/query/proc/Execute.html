

<a name=/database/query/proc/Execute>
<h2 byondver=506>Execute proc (database query)</h2>

<dl><dt><b>See also:</b>
<dd><a href=#/database>database datum</a>
<dd><a href=#/database/query>database query datum</a>
<dd><a href=#/database/query/proc/Add>Add proc (database query)</a>
<dd><a href=#/database/query/proc/Close>Close proc (database query)</a>
<dd><a href=#/database/query/proc/GetColumn>GetColumn proc (database query)</a>
<dd><a href=#/database/query/proc/GetRowData>GetRowData proc (database query)</a>
<dd><a href=#/database/query/proc/NextRow>NextRow proc (database query)</a>
<dd><a href=#/database/query/proc/Reset>Reset proc (database query)</a>
<dd><a href=#/database/query/proc/RowsAffected>RowsAffected proc (database query)</a>
</dl>

<dl><dt><b>Format:</b>
<dd>Execute(database)
</dl>

<dl><dt><b>Args:</b>
<dd>database: A /database datum with the database to be queried, or the name of the database file
</dl>

<p>Runs a database query. Once the query is run, if the query is supposed
to returns any rows you can call NextRow() until finished, and then GetColumn() or
GetRowData() to get the information from each row. For queries that cause changes,
RowsAffected() is also a useful call.

<p>The database argument is optional after the first time you use it.

<p>You can use a filename instead of a /database datum, as a shortcut; the datum
will be created for you.

<p>After a query is executed, calling Add() to create new query text will
clear out the old query text automatically.

<h3>Example:</h3>
<xmp>
var/database/db = new("mydb.db")
var/database/query/q = new("SELECT quest,complete FROM quests WHERE name=?", usr.key)

if(!q.Execute(db)) return null

var/list/completed_quests = new
while(q.NextRow())
    var/row = q.GetRowData()
    if(row["complete"]) completed_quests[row["quest"]] = 1
return completed_quests
</xmp>


