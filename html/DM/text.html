

<a name=/DM/text>
<h2>text</h2>

<dl><dt><b>See also:</b>
<dd><a href=#/operator/%3c%3c/output>&lt;&lt; output operator</a>
<dd><a href=#/DM/text/entities>entities (text)</a>
<dd><a href=#/DM/text/macros>macros (text)</a>
<dd><a href=#/DM/text/tags>tags (text)</a>
<dd><a href=#/proc/text>text proc</a>
<dd><a href=#/{notes}/Unicode>Unicode</a>
</dl>

<p>Text consists of a string of characters enclosed in double quotes.  To
place a quote inside a string, escape it with a backslash <code>\</code>
character.  You will also need to escape a backslash if you want to use
one on purpose.


<h3>Example:</h3>
<xmp>
usr << "He said, \"Hi.\""
</xmp>

<p>This example sends some text to the usr:  <code>He said, "Hi."</code>

<p>Backslashes are also used for special <a href=#/DM/text/macros>macros</a>
and to escape other characters that would normally be hard to include in a
string.  A backslash at the end of a line will ignore the line break, and
continue the string on the next line after ignoring any leading spaces.

<p>To insert a variable expression into a string, enclose it in brackets
<code>[]</code>.  These are referred to as embedded text expressions.  An
object expression will display the object's name preceded by the text macro
<code>\the</code> or <code>\The</code> if no other article has been
specified.  Capitalization of the article is inferred from context.

<h3>Example:</h3>
<xmp>
mob/verb/shout(T as text)
  world << "[usr]: [T]"
</xmp>

<p>If this example is called by a mob named "Bill" with the text "hi
everybody!", it will display "Bill: hi everybody!".

<p>On the other hand, if it is called by a mob named "cat", it would display
"The cat: hi everybody!".

<p byondver=515>Via <a href=#/operator/overload>operator overloading</a> you
can define an <tt>operator""</tt> proc for an object to return different
text when it's embedded in a string.

<h3>Document strings</h3>

<p>For lengthy text strings, DM provides a special text <em>document</em>
syntax.  This begins with <code>{"</code> and ends with <code>"}</code>.  It
may include multiple lines and even un-escaped double quotes, but it still
parses escape characters and embedded expressions.

<h3>Example:</h3>
<xmp>
mob/verb/end()
  usr << {"
This is the way the world ends
This is the way the world ends
This is the way the world ends
Not with a bang but a whimper.

--T.S. Eliot "Hollow Men"
"}
  del world  //the end!
</xmp>

<h3 byondver=512>Raw strings</h3>

<p>DM also has a format for raw strings, which do not allow escape characters
or embedded expressions.  This can be useful for many situations, especially
<a href=#/{notes}/regex>regular expressions</a> which tend to use
characters that need escaping.  There are three ways to specify a raw string.
All of them begin with the <code>@</code> character.

<p>Simple raw strings follow <code>@</code> with a single-character
delimiter, usually <code>"</code> but it can be almost anything, and end when
that delimiter is seen again.  Line breaks are not allowed in simple raw
strings.

<h3>Examples:</h3>
<xmp>
world << @"I can say \ or [] without escaping anything!"
world << @#Here I can use "quotes" but not the pound sign.#

var/regex/R = new(@/(\d+)/)

// without raw strings
world << "I can say \\ or \[] without escaping anything!"   // lying
world << "I have to escape \"quotes\" to use them."

var/regex/R = new("(\\d+)")
</xmp>

<p>Complex raw strings use more complicated delimiters, but they let you
include line breaks.  There are two ways to do this: One starts with
<code>@{"</code> and ends with <code>"}</code>, so it looks like the familiar
document string format.  The other way starts with <code>@(XYZ)</code>, where
<code>XYZ</code> is any arbitrary text you want it to be, and ends when that
same text is encountered.

<p>With a complex raw string, a single leading and/or trailing line break will
be ignored.

<h3>Examples:</h3>
<xmp>
world << @{"
Now I have absolute freedom to use "quotes"
or [brackets] or line breaks, as long as I
don't follow a quote with a closing brace.
"}

world << @(~~~)
Until three tilde (~) characters are seen, this is a valid string.
~~~     // end of string

world << @(!!)You don't need a line break if you don't want one.!!
</xmp>

