

<a name=/client/proc/Stat>
<h2>Stat proc (client)</h2>

<dl><dt><b>See also:</b>
<dd><a href=#/atom/proc/Stat>Stat proc (atom)</a>
<dd><a href=#/proc/stat>stat proc</a>
<dd><a href=#/client/var/statobj>statobj var (client)</a>
<dd><a href=#/proc/statpanel>statpanel proc</a>
<dd><a href=#/client/var/statpanel>statpanel var (client)</a>
<dd><a href=#/{skin}/control/info>Info control (skin)</a>
</dl>

<dl><dt><b>Format:</b>
<dd>Stat()
</dl>

<dl><dt><b>When:</b>
<dd>Called periodically by the client to update the stat window.
</dl>

<dl><dt><b>Default action:</b>
<dd>Call statobj.Stat().
</dl>

<p>If this procedure sleeps (or engages in some other waiting operation), it
will not be called again until it finally returns.  This allows you to
effectively decrease the frequency of calls to the proc.  You might want to
do that if it is a fairly lengthy procedure, and frequent calls are slowing
things down.

<p>To increase the frequency of stat updates, you can lower
<code>world.tick_lag</code>.

<p>Note: Typically only the currently viewed statpanel is updated, which
saves on some network activity and a little time.  If however the proc
sleeps, you need to be sure that any pending updates are displayed once
the right panel is available.  Therefore if you're resetting a var that
indicates the proc should sleep next time, it should not be reset unless
you know the player is looking at the right statpanel and has received
the updates.

<h3>Example</h3>
<xmp>
client/var/updategold = 1       // set to 1 if gold changes
client/var/updateinventory = 1  // set to 1 if inventory changes

client/Stat()
    // if not ready to update, Stat() won't be called again till sleep is done
    while(!updategold && !updateinventory)
        sleep(5)
    if(statpanel("Gold")) // switch to Gold panel and ask if player is looking at it
        stat("Gold", mob.gold)
        updategold = 0  // we updated, so turn this flag back off
    if(statpanel("Inventory"))
        stat(mob.contents)
        updateinventory = 0
</xmp>

<p>Because sleeping in Stat() requires more thinking through, it's best to do
so only in cases where Stat() has to do a lot of intensive calculations.

