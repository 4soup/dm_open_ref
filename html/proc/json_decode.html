

<a name=/proc/json_decode>
<h2 byondver=510>json_decode proc</h2>

<dl><dt><b>See also:</b>
<dd><a href=#/proc/json_encode>json_encode proc</a>
</dl>

<dl><dt><b>Format:</b>
<dd>json_decode(JSON)
<dd byondver=515>json_decode(JSON, flags)
</dl>

<dl><dt><b>Returns:</b>
<dd>A value interpreted from a JSON-formatted text string.
</dl>

<dl><dt><b>Args:</b>
<dd>JSON: The JSON-formatted text to decode.
<dd>flags: A set of flags that tell the decoder how to act.
</dl>

<p>Arrays like <tt>[1,2,3]</tt> will be converted to regular lists like
<tt>list(1,2,3)</tt>.

<p>Object literals like <tt>{"a":1}</tt> will be converted to associative
lists such as <tt>list("a"=1)</tt>. Each item in the list is also decoded.
Except in strict mode, non-string values are allowed as the "keys" in an
associaitve list, even though that's not valid JSON, and strings used as keys
can be left unquoted. BYOND doesn't care, as long as it can understand the
formatted text it's given. The only exception is that a number isn't allowed
to be an associative list key, and will be converted to a string instead, so
<tt>{1:2}</tt> becomes <tt>list("1"=2)</tt>.

<p>Special numbers <tt>NaN</tt> and <tt>Infinity</tt> are recognized correctly
(these are case-sensitive). All other numbers are parsed and stored in the
regular BYOND format (32-bit floating point).

<p>Since BYOND doesn't have dedicated boolean values, <tt>true</tt> and
<tt>false</tt> are interpreted as 1 and 0, respectively.

<p>The <tt>JSON_STRICT</tt> flag uses stricter JSON parsing rules and will
not allow some things. In strict mode: 
<ul>
<li>All strings must be double-quoted.</li>
<li>Special numbers <tt>NaN</tt> and <tt>Infinity</tt> are not allowed, but
  the <tt>{__number__:"NaN"}</tt> format used by <tt>json_encode()</tt> is
  recognized as a number.</li>
<li>Keys in an associative list must always be strings, and must be
  double-quoted.</li>
</ul>

<p>The <tt>JSON_ALLOW_COMMENTS</tt> flag allows you to include <tt>//</tt>
single-line comments and <tt>/* ... */</tt> long-form comments in the text to
be decoded. This can be mixed with the strict flag. This flag is now used by
default.

