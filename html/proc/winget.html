

<a name=/proc/winget>
<h2>winget proc</h2>

<dl><dt><b>See also:</b>
<dd><a href=#/proc/winexists>winexists proc</a>
<dd><a href=#/proc/winset>winset proc</a>
<dd><a href=#/{skin}>User interface skins</a>
<dd><a href=#/{skin}/param>parameters (skin)</a>
</dl>

<dl><dt><b>Format:</b>
<dd>winget(player, control_id, params)
</dl>

<dl><dt><b>Args:</b>
<dd>player: A mob or client.
<dd>control_id: The unique ID of a control in the player's skin.
<dd>params: The name of a parameter to read, or a semicolon-separated list of parameters
</dl>

<p>Retrieves info from a player about the current state of their skin. If
<tt>control_id</tt> and <tt>params</tt> are each just a single value, then the
return value will be a simple string with the value of that parameter. If
<tt>control_id</tt> or <tt>params</tt> is a semicolon-separated list like the
kind used in <tt>list2params()</tt>, then the result will be in a similar
format, and can be converted to a list form using <tt>params2list()</tt>.

<p>The <tt>control_id</tt> can be a window name, or in a
<tt>"[window].[control]"</tt> format, or just the control's ID itself as long
as it is unique.  Another valid form is <tt>":[type]"</tt> which selects the
default control of that type, e.g. <tt>":map"</tt> for the main map. As
mentioned above, you can retrieve info on more than one control at once by
separating them with semicolons, like <tt>"button1;button2"</tt>.

<h3>Example:</h3>
<xmp>
usr << "mainwindow.is-visible = [winget(usr, "mainwindow", "is-visible")]"
usr << "\nOther params:"
usr << winget(usr, "mainwindow", "pos;is-maximized")
usr << "\nButtons:"
usr << winget(usr, "button1;button2", "is-checked")
</xmp>

<p>This outputs:

<xmp>
mainwindow.is-visible = true

Other params:
pos=0x0;is-maximized=true

Buttons:
button1.is-checked=true;button2.is-checked=false
</xmp>

<p>If the returned result is actual text for any parameters, the single quote
or double quote characters may be escaped with a backslash. An actual backslash
will also be escaped with a backslash.

<p>You can also use a special wildcard format to retrieve info about all the
controls in a window, menu, or macro set. If control_id is <tt>"mainwindow.*"</tt>
for instance, then any control that is part of <tt>mainwindow</tt>&mdash;and
<tt>mainwindow</tt> itself&mdash;is included in the result if it has the
parameter(s) you're looking for. Use <tt>params2list()</tt> to interpret the
result.

<p class=performance>Note: Because the client must be contacted to get this
information, <tt>winget()</tt> will sleep the current proc.

<h3>Special wingets</h3>

<p>Calling <tt>winget()</tt> with a blank or null <tt>control_id</tt> can
return some values that belong to the client as a whole, not to specific
controls. They can also be used for <a href=#/{skin}/commands>embedded
wingets</a>.

<dl class=codedt>
<dt>focus</dt><dd>The full ID of the control, if any, that currently has keyboard focus.</dd>
<dt>windows</dt><dd>The IDs of all windows, separated by semicolons.</dd>
<dt byondver=496>panes</dt><dd>The IDs of all panes, separated by semicolons.</dd>
<dt>menus</dt><dd>The IDs of all menus, separated by semicolons.</dd>
<dt>macros</dt><dd>The IDs of all macro sets, separated by semicolons.</dd>
<dt>sound</dt><dd>True if sounds are enabled.</dd>
<dt>hwmode</dt><dd>True if the map displays in hardware rendering mode.</dd>
<dt>url</dt><dd>The URL the client is connected to in <tt>IP:port</tt> form. The port is 0 if connected to a local .dmb file, and either an empty string or null is returned if Dream Seeker is not connected at all.</dd>
<dt byondver=515>num-lock</dt><dd>True if Num Lock is on.</dd>
<dt byondver=515>caps-lock</dt><dd>True if Caps Lock is on.</dd>
<dt byondver=515>scroll-lock</dt><dd>True if Scroll Lock is on.</dd>
</dl>

