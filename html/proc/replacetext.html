

<a name=/proc/replacetext>
<h2 byondver=510>replacetext proc</h2>

<dl><dt><b>See also:</b>
<dd><a href=#/proc/findtext>findtext proc</a>
<dd><a href=#/proc/replacetextEx>replacetextEx proc</a>
<dd><a href=#/{notes}/regex>Regular expressions</a>
<dd><a href=#/regex/proc/Replace>Replace proc (regex)</a>
</dl>

<dl><dt><b>Format:</b>
<dd>replacetext(Haystack,Needle,Replacement,Start=1,End=0)
</dl>

<dl><dt><b>Returns:</b>
<dd>The Haystack text with all cases of Needle replaced by Replacement
</dl>

<dl><dt><b>Args:</b>
<dd>Haystack: The text string to search.
<dd>Needle: The sub-text to search for. May be a regular expression (regex).
<dd>Replacement: The replacement text, or a proc.
<dd>Start: The text byte position in Haystack in which to begin the search.
<dd>End: The text byte position in Haystack immediately following the last
     character to search.
</dl>

<p>When Needle is text, this instruction is NOT sensitive to the case of
Haystack or Needle.  The case-sensitive version is replacetextEx().  If the
Needle is a lowercase word, the replacement will be changed to uppercase or
all caps if the found text is uppercase or all caps.

<h3>Example:</h3>
<xmp>
world << replacetext("One on one", "one", "two")
</xmp>

<p>This outputs "Two on two", where the first case's "One" is identified as
uppercase.

<p>You may use a proc as the Replacement value.  In that case, the proc will
be called with the found text as an argument, and its return value will be the
replacement.  There will be no automatic correction to uppercase or all caps
in this case.

<p>When the Needle value is a regular expression, this proc behaves identically
to the <a href=#/regex/proc/Replace>regex Replace()</a> proc.  Case-sensitivity,
and whether one match or all are replaced, depend on the regular expression.

<p>Note: In strings containing non-ASCII characters, byte position and
character position are not the same thing. Use <tt>replacetext_char()</tt> to
work with character counts instead of bytes, at a performance cost. See the
<a href=#/{notes}/Unicode>Unicode</a> section for more information.

