

<a name=/proc/set/waitfor>
<h2>waitfor setting (proc)</h2>

<dl><dt><b>See also:</b>
<dd><a href=#/proc/sleep>sleep proc</a>
<dd><a href=#/proc/spawn>spawn proc</a>
<dd><a href=#/proc/var/%2e>. var (proc)</a>
</dl>

<p>By default, procs that sleep usually expect their callers to wait for them
to finish, so the callers must sleep as well. Using <tt>set waitfor=0</tt>
will disable that behavior, causing any sleep to return control to the caller
immediately.

<h3>Example</h3>
<xmp>
mob/proc/LongLoop()
   set waitfor = 0
   while(1)
      UpdateAI()
      // proc will return to caller here
      sleep(1)
</xmp>

<p>This setting will also dictate what happens if a callee sleeps. Consider an
example where proc A calls proc B which calls proc C, and proc B has
<tt>waitfor</tt> set to 0. When proc C sleeps, proc B will also sleep, but
proc A will continue running as if proc B returned early. The <tt>.</tt> var
currently in proc B will be used as its return value to A. When proc C wakes
up and finishes, it will wake up proc B, but now B's return value will be
ignored since A is no longer waiting for it.

<p>In older versions, the <a href=#/datum/proc/New><tt>New</tt> proc</a>
always had <tt>waitfor</tt> set to 0 by default, but this was later changed.
Now 1 is always the default, so setting <tt>waitfor</tt> to 1 will result in a
warning that it is no longer necessary.

