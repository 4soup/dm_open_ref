

<a name=/proc/winset>
<h2>winset proc</h2>

<dl><dt><b>See also:</b>
<dd><a href=#/proc/winclone>winclone proc</a>
<dd><a href=#/proc/winexists>winexists proc</a>
<dd><a href=#/proc/winget>winget proc</a>
<dd><a href=#/proc/winshow>winshow proc</a>
<dd><a href=#/{skin}>User interface skins</a>
<dd><a href=#/{skin}/param>parameters (skin)</a>
</dl>

<dl><dt><b>Format:</b>
<dd>winset(player, control_id, params)
</dl>

<dl><dt><b>Args:</b>
<dd>player: A mob or client.
<dd>control_id: The unique ID of a control in the player's skin.
<dd>params: A text string with parameters to set, in the format returned by
  <tt>list2params()</tt>; <i>OR</i> an associative list.
</dl>

<p>Sets parameters for a player's skin. The parameter list can be created by
making a list and using <tt>list2params()</tt>, or it can be done manually by
just using a string like <tt>"is-visible=true;text-color=#f00"</tt>. You can
also just use a list directly, which will be passed to <tt>list2params()</tt>
internally.

<p>The <tt>control_id</tt> can be a window name, or in a
<tt>"[window].[control]"</tt> format, or just the control ID as long as it is
unique. In some special cases it can also be null. Another valid form is
<tt>":[type]"</tt> which selects the default control of that type, e.g.
<tt>":map"</tt> for the main map.

<p>If you want to use a text string that may include spaces, surround the
string with double quotes and escape them using a backslash, e.g.
<tt>"text=\"This is some text.\""</tt>. Backslashes can also be used by
preceding them with another backslash. For filenames, use single quotes around
the file. Sometimes escapement may need to go several levels deep; for example
to set up an input control with a default say command, you will need to escape
it twice:

<blockquote>
Desired command: <tt>say "</tt><br>   
Escaped form with quotes: <tt>"<b>say \"</b>"</tt><br>   
Final form: <tt>\"say \\\"\"</tt>

<p><tt>winset(usr, "mainwindow.input", "command=<b>\"say \\\"\"</b>")</tt>   
</blockquote>

<p>You can set more than one control's parameters at once by leaving the
<tt>control_id</tt> argument null, and including the control as part of the
parameter list:

<xmp>winset(usr, null,\
  "mainwindow.output.background-color=#ffffff;mainwindow.input.background-color=#ffffff")</xmp>

<h3>Special winsets</h3>

<p>Some "global" winset options will let you change things that affect the
client as a whole, not just specific controls.

<h4 byondver=496>reset</h4>

<p>You can reset the skin to its beginning state, removing all
runtime-created controls and windows, by calling
<tt>winset(player, null, "reset=true")</tt>.

<h4>command</h4>

<p>Another use for <tt>winset()</tt> is to send commands to the client that
normally can only run from there, like <tt>.profile</tt> or <tt>.quit</tt>. To
do this, leave the <tt>control_id</tt> argument null, and just use a parameter
called "command":

<xmp>obj/quitbutton
    name = "Quit"
    icon = 'buttons.dmi'
    icon_state = "quit"

    Click()
        winset(usr, null, list("command"=".quit"))</xmp>

<p>Because many characters need to be specially encoded for winsets, it's
best to either use the list format of <tt>winset()</tt> which handles that
encoding for you. If you want to use the string form, like <tt>winset(usr,
null, "command=XYZ")</tt>, then you should use
<a class=code href=#/proc/url_encode>url_encode()</a> to encode your command.

<h4 byondver=516>browser-options</h4>

<p>The "browser-options" global parameter lets you enable or disable certain
browser functionality. This can be a comma-separated list, or you can precede
an option with <tt>+</tt> or <tt>-</tt> to enable or disable it specifically.

<table class=codefirst>
<tr><th>Option</th><th>Default</th><th>Description</th></tr>
<tr><td>find</td><td>&#x274c;</td><td>Ctrl+F can open the built-in Find dialog.</td>
<tr><td>devtools</td><td>&#x274c;</td><td>F12 can open a devtools window, which is useful for debugging scripts.</td>
<tr><td>refresh</td><td>&#x274c;</td><td>Ctrl+R or F5 can refresh the page.</td>
<tr><td>zoom</td><td>&#x274c;</td><td>Ctrl with the + or - keys can zoom the browser, and Ctrl+0 can reset it.</td>
<tr><td>byondstorage</td><td>&#x274c;</td><td>Enables <a class=code href=#/{skin}/control/browser/byondStorage>byondStorage</a> access.</td>
</table>

<h3>Example:</h3>
<xmp>mob/Login()
    ..()
    winset(usr, null, "browser-options=devtools,find")</xmp>

<p>If you plan to use the <tt>+</tt> or <tt>-</tt> modifiers, you should
either use the list format of <tt>winset()</tt> or use
<a class=code href=#/proc/url_encode>url_encode()</a> to encode the list of
options.

<p>Browser options are shared across all browser controls.

