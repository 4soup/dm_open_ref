

<a name=/world/proc/Profile>
<h2 byondver=513>Profile proc (world)</h2>

<dl><dt><b>Format:</b>
<dd>Profile(command, format)
<dd>Profile(command, type, format)
</dl>

<dl><dt><b>Returns:</b>
<dd>Profilng data or null
</dl>

<dl><dt><b>Args:</b>
<dd>command: A numerical value that says whether to start, stop, refresh, etc.
<dd>type: A type of profile to use, other than proc profiling.
<dd>format: Optional format for output data
</dl>

<p>Interacts with the built-in server profiler without requiring the host to do
so via Dream Daemon, or an authorized player via Dream Seeker.

<p>The <tt>command</tt> value is built from bitflags, so it can combine any of
these three values via the <tt>|</tt> operator:

<dl class=codedt>
<dt>PROFILE_STOP</dt><dd>Stop profiling. Not using this flag will start/continue profiling.</dd>
<dt>PROFILE_CLEAR</dt><dd>Clear all profile data. This will also cause the proc to return null.</dd>
<dt>PROFILE_AVERAGE</dt><dd>Any output data should use average times instead of total times.</dd>
</dl>

<p>These additional values are also defined for convenience:

<dl class=codedt>
<dt>PROFILE_START</dt><dd>Start/continue profiling but don't clear any existing data.</dd>
<dt>PROFILE_REFRESH</dt><dd>Currently this is the same as <tt>PROFILE_START</tt>.</dd>
<dt>PROFILE_RESTART</dt><dd>Start profiling and clear existing data.</dd>
</dl>

<h3>Profiling procs</h3>

<p>By default, data will be returned as a list. The first six values are the
column names: <tt>"name"</tt>, <tt>"self"</tt>, <tt>"total"</tt>,
<tt>"real"</tt>, <tt>"over"</tt>, and <tt>"calls"</tt>, corresponding to the
columns in the profiler. These are followed by the profile data for each proc,
with the data being in the same column order. E.g. the next six items
represent the first proc in the profile.

<p>The optional <tt>format</tt> argument however can be used to return the
data in other formats. Currently the only accepted value is <tt>"json"</tt>,
which will output the same data in JSON format.

<h3>SendMaps profile</h3>

<p>Using <tt>"sendmaps"</tt> in the <tt>type</tt> argument will profile the
routines used to send map informaiton to players. Unlike the proc profiling
this only has three data columns: <tt>"name"</tt>, <tt>"value"</tt>, and
<tt>"calls"</tt>. The value column might be a time or number value, depending
on what's being measured. 

<p>The JSON format will include a <tt>unit</tt> property data that is not a
raw number, such as a time value.

