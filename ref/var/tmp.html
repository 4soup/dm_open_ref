

<a name=/var/tmp>
<h2>tmp vars</h2>

<dl><dt><b>See also:</b>
<dd><a href=#/savefile>savefile</a>
<dd><a href=#/var>vars</a>
</dl>

<p>The tmp type modifier indicates that an object variable should not be
automatically written to the save file.  This could mean that the variable
is transient&mdash;that is, it is calculated at run-time and need not be
saved. It could also indicated that the designer will handle saving of that
variable specially and wishes to bypass the automated routine.

<p>It is especially important to use tmp when you have references to
external objects that should not be saved along with the object.  For
example, suppose players have a <var>leader</var> variable which indicates
who or what they are following.  You would not necessarily want the leader
to be saved in the player's savefile.  Therefore, you would need to use
<code>tmp</code> when defining the variable.

<h3>Example:</h3>
<xmp>
mob
   var/tmp
      leader
   verb
      follow(mob/M)
         leader = M
</xmp>

<div class="sidebar note">
<p>Accidentally saving another mob in your savefile can be disastrous. This
can happen if you save a turf that the mob is standing on, or if you save an
obj with a non-tmp var that points to that mob, and many other ways.

<p>The reason this is a problem is that another player's mob will have the
<tt>key</tt> var set already. When that mob is loaded, if they are already
logged into the game they will be immediately reassigned to that just-loaded,
older mob with a <tt>Login()</tt> call, while the mob they're supposed to
be using will have <tt>Logout()</tt> called. Thus they'll appear to
"rollback" to an earlier state.

<p>If your game accidentally falls into this trap, don't panic! You can
look at your savefiles via <a class=code href=#/savefile/ImportText>ImportText()</a>
or in an editor to see which var is the problem. Once you change that var to
<tt>/tmp</tt>, you can override <a class=code href=#/datum/proc/Read>Read()</a>
so if that var is present, you can remove it before calling <tt>..()</tt> to
finish loading.
</div>

<dl><dt>The following built-in variables are defined as tmp vars:
<dd><a href=#/datum/var/type>type</a>
<dd><a href=#/datum/var/parent_type>parent_type</a>
<dd><a href=#/datum/var/vars>vars</a>
<dd><a href=#/atom/var/verbs>verbs</a>
<dd><a href=#/mob/var/group>group</a>
<dd><a href=#/atom/var/loc>loc</a>
<dd><a href=#/atom/var/locs>locs</a>
<dd><a href=#/atom/var/vis_locs>vis_locs</a>
<dd><a href=#/atom/var/x>x</a>
<dd><a href=#/atom/var/y>y</a>
<dd><a href=#/atom/var/z>z</a>
<dd><a href=#/mob/var/ckey>ckey</a>
<dd><a href=#/atom/var/visibility>visibility</a>
<dd><a href=#/atom/movable/var/bound_x>bound_x</a>
<dd><a href=#/atom/movable/var/bound_y>bound_y</a>
<dd><a href=#/atom/movable/var/bound_width>bound_width</a>
<dd><a href=#/atom/movable/var/bound_height>bound_height</a>
<dd><a href=#/atom/var/mouse_over_pointer>mouse_over_pointer</a>
<dd><a href=#/atom/var/mouse_drag_pointer>mouse_drag_pointer</a>
<dd><a href=#/atom/var/mouse_drop_pointer>mouse_drop_pointer</a>
</dl>

