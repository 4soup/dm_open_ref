

<a name=/DM/text/style>
<h2>style sheets</h2>

<dl><dt><b>See also:</b>
<dd><a href=#/{{appendix}}/css>CSS attributes</a>
<dd><a href=#/DM/text/entities>entities (text)</a>
<dd><a href=#/DM/text/macros>macros (text)</a>
<dd><a href=#/client/var/script>script var (client)</a>
<dd><a href=#/DM/text/tags>tags (text)</a>
<dd><a href=#/DM/text>text</a>
</dl>

<p>HTML tags, such as <code>&lt;font&gt;</code> may be used to directly format
output text.  Another approach, however, is to use HTML tags to specify
purely structural information and use a style sheet to define how various
elements within that structure should be treated.  DM uses a
<a href=#/{{appendix}}/css>subset of the Cascading Style Sheet (CSS)
language</a>, which was introduced for this purpose in HTML documents.

<p>This section discusses the syntax of style sheets as an independent
element.  For information on how to include the style sheets in your DM
code, see the section on <a class=code href=#/client/var/script>client.script</a>.

<p>As an example of a style sheet, one might want combat and conversational
messages to appear differently&mdash;perhaps using different colors.  Instead
of using the <code>&lt;font&gt;</code> tag to color the text, you could use
<code>&lt;span&gt;</code> to mark the beginning and ending of the text and
to specify what kind of message it is.  The result might be text such as the
following:

<xmp>
"[usr] <span class=combat>spanks</span> [targ]!"
"[usr] says, '<span class=chat>[msg]</span>'"
</xmp>

<p>The <code>class</code> attribute may be used with any tag, but
<code>span</code> and <code>div</code> are often convenient because they
have no other side-effect but defining the style class.  <code>span</code>
is for text within a single paragraph and <code>div</code> is for whole
paragraphs.  The way text belonging to a particular class is formatted may be
controlled in a style sheet such as the following:

<xmp>
.combat {color: red}
.chat {color: green}
</xmp>

<p>This says that text in the <tt>combat</tt> class should be colored red and
text in the <tt>chat</tt> class should be colored green.  These classes are
not pre-defined; you can create whatever new style classes you need. (The
color names are predefined however. You can find a list of them in
<a href=#/{{appendix}}/html-colors>HTML colors</a>.

<p>The advantage of using style sheets instead of direct formatting tags is
that you can cleanly separate structural information (such as combat and
conversational messages) from formatting information (such as red and green
text).  By separating the two, you or the player can easily plug in
different formatting schemes without changing any of the actual content.

<p>A style sheet is composed of a list of rules, such as the two rules in the
preceding example.  Each rule contains one or more <EM>selectors</EM>
followed by a body of attribute assignments (in braces).  The selector
specifies the context of the rule and the body specifies the format.

<p>A selector may specify a container tag (such as <code>span</code>,
<code>body</code>, or <code>p</code>) and a class.  The above example could
have been written with a selector of <code>span.chat</code>.  However, by
leaving out the tag, it applies to any tag with <code>class=chat</code>.  It
is also possible to only specify the tag and not the class.  In that case,
the selector applies to any matching tag, regardless of class.

<p>To specify a <EM>nested</EM> context, several simple selectors may be listed
one after the other.  For example, emphasized text within a combat message
could be enlarged with the following rule:

<xmp>
.combat em {font-size: larger}
</xmp>

<p>It is also possible to list several selectors separated by commas in order
to make them all apply to the same body.  For example, this next rule is
equivalent to the two following ones:

<xmp>
.combat em, .chat em {font-size: larger}
.combat em {font-size: larger}
.chat em {font-size: larger}
</xmp>

<p>The style rule body contains a list of attribute assignments, delimited by
semicolons.  Each assignment takes the form of an attribute name, followed
by a colon, followed by the value of the attribute.  The following table
summarizes the recognized attributes and their possible values.

<table class="withborder">
<tr><td>color</td>           <td rowspan=2>#F00, #FF0000, red, rgb(255,0,0), rgb(100%,0%,0%)</td>
<tr><td>background</td>
<tr><td>font-size</td>       <td>10pt, 1.5em, 150%</td>
<tr><td>font-style</td>      <td>normal or italic</td>
<tr><td>font-weight</td>     <td>normal, bold, lighter, darker, or 100 to 900</td>
<tr><td>font-family</td>     <td>monospace, sans-serif, serif, cursive, ...</td>
<tr><td>font</td>            <td><i>style weight size family</i></td>
<tr><td>text-decoration</td> <td>none, underline</td>
<tr><td>text-align</td>      <td>right, left, or center</td>
<tr><td>vertical-align</td>  <td>top, middle, bottom</td>
<tr><td>text-indent</td>     <td rowspan=3>0.25in, 3em, 20pt</td>
<tr><td>margin-left</td>
<tr><td>margin-right</td>
<tr><td>width</td>           <td rowspan=2>16px, 32px, auto</td>
<tr><td>height</td>
<tr><td>line-height</td>     <td>1.2</td>
</table>

<h3>fonts</h3>

<p>The <code>font</code> attribute is a special short-hand for assigning
<code>font-size</code>, <code>font-style</code>, <code>font-weight</code>,
and <code>font-family</code> in one statement.  Any properties that are not
specified in the <code>font</code> statement are assigned to their default
values.

<p>The font family may be a specific font name or a more general category such
as monospace or sans-serif.  Since not all users necessarily have the same
fonts installed, it is a good idea to list alternate fonts.  The desired
font is placed first, followed by other possible fall-backs, each separated
by a comma.  Usually a general family such as monospace is listed last of
all.  Any font names containing a space should have quotes around them.

<p>The following example sets the font for the <code>&lt;body&gt;</code>
tag.  Even if you don't explicitly use <code>&lt;body&gt;</code> in output
text, it is applied implicitly.

<xmp>
body {font: 12pt 'Times New Roman', sans-serif}
</xmp>

<p>This sets the font to 12 point and selects <code>Times New Roman</code> if
it is available and otherwise falls back on a system-determined sans-serif
font.  This command also implicitly specifies not to use italics and to use a
normal font weight (not bold).

<p>Font sizes may be specified in points (1pt = 1/72 of an inch), picas (1pc
= 12pt), pixels (px), inches (in), centimeters (cm), and millimeters (mm).
There are also various levels corresponding to the old 1 to 7 HTML scale.
These are <tt>xx-small</tt>, <tt>x-small</tt>, <tt>small</tt>, <tt>medium</tt>,
<tt>large</tt>, <tt>x-large</tt>, and <tt>xx-large</tt>. In addition to these
absolute font sizes, it is possible to use a relative size, such as 150% or
equivalently 1.5em (1em = 100% of the current font size).  This scales the
font relative to the currently active font setting.

<p>In addition to regular classes, there are special pseudo-classes for
handling embedded hyperlinks.  These are specified in the selector with the
class starting with a colon rather than a dot.  They are <code>:link</code>,
<code>:visited</code>, and <code>:active</code>.  These only apply to the
<code>&lt;a&gt;</code> tag.  The <code>:link</code> class applies to
hyperlinks in their normal state.  Once a link has been clicked, it belongs
instead to the <code>:visited</code> class.  When the user holds the mouse
over a link, it temporarily belongs to the <code>:active</code> class.  The
only attribute that may change in an active or visited link is the text
color.

<h3>margins and indents</h3>

<p>Paragraphs can be given different margins according to your preferences.
The <code>margin-left</code> attribute controls the left margin, and
<code>margin-right</code> is the right margin. You can use specific sizes
like inches or points, or a relative size unit like em or ex. (A percentage
is interpreted so that 100% is 1em, not the width of the window.) Using the
<code>text-indent</code> attribute will indent the first line of a paragraph
from the left margin. It is possible to create a hanging indent by using a
negative value for <code>text-indent</code>, like so:

<xmp>
body {text-indent: -0.5in; margin-left: 0.5in}
</xmp>


<h3>background colors</h3>

<p>The background attribute is only relevant to the <tt>body</tt> context.  It
causes the entire terminal background to change color.  When doing this, it is
usually necessary to change the foreground colors of text or it may become
unreadable.  The various standard classes of output generated by DreamSeeker
are in the following table.

<h3>system colors</h3>

<table class="withborder">
<tr><td>system notice</td>             <td>general notices from the client</td>
<tr><td>system command echo</td>       <td>command echoing</td>
<tr><td>system command expansion</td> <td>command-line expansion list</td>
<tr><td>system pager</td>              <td>pager messages</td>
<tr><td>system irc</td>                <td>IRC command prefix</td>
</table>

<p>The value of the CLASS attribute may contain a list of classes separated by
spaces.  This permits client output to be in the 'system' class as well as
more specific ones.  That allows you to change all of these colors in one
shot if you are too lazy to change them each individually.  For example, if
you define a style sheet that changes the background color, you might need to
redefine the various foreground colors like this:

<xmp>
body {background: aqua; color: black}
.system {color: red; font-weight: bold}
.command {color: green}
</xmp>

<p>In this example, the background color of the terminal will be aqua, normal
text from the server will be black, and all output from the client will be
bold and red, except echoed commands and expansion lists, which will be bold
and green.  The more specific .command rule is placed after the general
.system rule so that its color takes precedence.  This is how style sheets
are composed&mdash;you write general rules first followed by any exceptions.

<h3>style rule precedence</h3>

<p>The order in which rules are specified is one of the factors that determines
precedence of style sheet commands.  The language is known as Cascading Style
Sheets because of its ability to handle several layers of stylistic rules,
intermingling the configurations of the user and the designer in an ordered
fashion.

<p>Rules are selected by first finding all matching candidates for a given
attribute in the current HTML tag being processed.  If there is more than
one, rules from a higher level style sheet take precedence over lower level
ones.  That means the basic user configurable settings in DreamSeeker are
the lowest priority, followed by a style sheet in the user's
<code>.dms</code> script file, followed by a style sheet from the designer's
<code>client.script</code> setting, because that is the order in which these
are read by the style sheet manager.

<p>Rules from the same style sheet are ordered by specificity.  The selector
<code>span.chat</code> is more specific than <code>.chat</code> and
<code>.chat em</code> is more specific than <code>em</code>.  In general,
the more classes referenced by a selector, the more specific it is.  When
that results in a tie, the selector with the greater number of tags takes
precedence.

<p>If two rules about the same attribute come from the same sheet and have the
same specificity, the final one to be defined takes precedence.

<p>In the rare event that a rule needs to break out of the normal order of
precedence, it can be flagged as important.  In this case it will take
precedence over all other "unimportant" rules.  However, if more than one
rule is important, the normal rules of precedence will be used to resolve
the conflict.

<p>The important flag is applied after the attribute assignment like this:

<xmp>
body {background: white ! important; font: serif}
</xmp>

<p>In the above example, only the background color is important, not the font
specification.

<h3><tt>style</tt> attribute</h3>

<p>Style commands may also be inserted directly in an html tag to control
its appearance.  This does not have the advantages of style sheets, which
separate content from presentation, but it does allow you to use the style
sheet syntax when formatting text.

<p>The following example uses the style attribute to color some text:

<xmp>
usr << "That <span style='color: red'>HURT</span>!"
</xmp>

<p>As you can see, the <code>style</code> attribute of any tag can be
assigned to a text string containing a list of attribute assignments.  Just
the body of the style rule is given, since no selector is needed to match
the current context.

<h3>Maptext options</h3>

<p>The <a class=code href=#/atom/var/maptext>atom.maptext</a> var supports
some additional CSS attributes.

<table class="withborder code">
<tr><td>vertical-align</td>  <td>top, middle, bottom</td>
<tr><td>text-shadow</td>     <td><i>x-offset y-offset blur color</i></td>
<tr><td>-dm-text-outline</td><td><i>width color style</i></td>
</table>

<p>Additionally, you can use the <tt>:hover</tt> pseudo-class to change
the color of a link. As with other link pseudo-classes, only the text color
can currently be changed.

